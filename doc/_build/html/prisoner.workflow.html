

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>prisoner.workflow package &mdash; PRISONER 0.2.3 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="PRISONER 0.2.3 documentation" href="index.html"/>
        <link rel="up" title="prisoner package" href="prisoner.html"/>
        <link rel="next" title="prisoner.workflow.tests package" href="prisoner.workflow.tests.html"/>
        <link rel="prev" title="prisoner.tests package" href="prisoner.tests.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html">
        

        
          
          <img src="_static/prisoner-logo.png" class="logo" />
        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials.keyconcepts.html">Key concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.demo.html">Running the PRISONER demo</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials.demo.html#pre-requisites">Pre-requisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials.demo.html#start-the-docker-container">Start the Docker container</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.gettingstarted.html">Installing PRISONER</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials.gettingstarted.html#installing-prisoner-for-local-development">Installing PRISONER for local development</a><ul>
<li class="toctree-l4"><a class="reference internal" href="tutorials.gettingstarted.html#spin-up-a-docker-vm">Spin-up a Docker VM</a></li>
<li class="toctree-l4"><a class="reference internal" href="tutorials.gettingstarted.html#clone-from-github">Clone from GitHub</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.helloworld.html">Writing your first experiment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials.helloworld.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials.helloworld.html#in-this-tutorial">In this tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials.helloworld.html#privacy-policies">Privacy policies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="tutorials.helloworld.html#writing-the-privacy-policy">Writing the privacy policy</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="prisoner.html">prisoner package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="prisoner.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="prisoner.gateway.html">prisoner.gateway package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="prisoner.gateway.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="prisoner.gateway.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="prisoner.gateway.html#module-prisoner.gateway.FacebookGateway">prisoner.gateway.FacebookGateway module</a></li>
<li class="toctree-l4"><a class="reference internal" href="prisoner.gateway.html#module-prisoner.gateway.LastfmGateway">prisoner.gateway.LastfmGateway module</a></li>
<li class="toctree-l4"><a class="reference internal" href="prisoner.gateway.html#module-prisoner.gateway.ServiceGateway">prisoner.gateway.ServiceGateway module</a></li>
<li class="toctree-l4"><a class="reference internal" href="prisoner.gateway.html#module-prisoner.gateway.TwitterGateway">prisoner.gateway.TwitterGateway module</a></li>
<li class="toctree-l4"><a class="reference internal" href="prisoner.gateway.html#module-prisoner.gateway">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="prisoner.persistence.html">prisoner.persistence package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="prisoner.persistence.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="prisoner.persistence.html#module-prisoner.persistence.PersistenceManager">prisoner.persistence.PersistenceManager module</a></li>
<li class="toctree-l4"><a class="reference internal" href="prisoner.persistence.html#module-prisoner.persistence">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="prisoner.server.html">prisoner.server package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="prisoner.server.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="prisoner.server.html#module-prisoner.server.webservice">prisoner.server.webservice module</a></li>
<li class="toctree-l4"><a class="reference internal" href="prisoner.server.html#module-prisoner.server">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="prisoner.tests.html">prisoner.tests package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="prisoner.tests.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="prisoner.tests.html#module-prisoner.tests.tests">prisoner.tests.tests module</a></li>
<li class="toctree-l4"><a class="reference internal" href="prisoner.tests.html#module-prisoner.tests">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="">prisoner.workflow package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-prisoner.workflow.Exceptions">prisoner.workflow.Exceptions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-prisoner.workflow.ExperimentBuilder">prisoner.workflow.ExperimentBuilder module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prisoner-workflow-policydocumentgenerator-module">prisoner.workflow.PolicyDocumentGenerator module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-prisoner.workflow.PolicyProcessor">prisoner.workflow.PolicyProcessor module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-prisoner.workflow.SocialObjectGateway">prisoner.workflow.SocialObjectGateway module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-prisoner.workflow">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="prisoner.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="prisoner.html#module-prisoner.SocialObjects">prisoner.SocialObjects module</a></li>
<li class="toctree-l2"><a class="reference internal" href="prisoner.html#module-prisoner">Module contents</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">PRISONER</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="prisoner.html">prisoner package</a> &raquo;</li>
      
    <li>prisoner.workflow package</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/prisoner.workflow.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="prisoner-workflow-package">
<h1>prisoner.workflow package<a class="headerlink" href="#prisoner-workflow-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="prisoner.workflow.tests.html">prisoner.workflow.tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="prisoner.workflow.tests.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="prisoner.workflow.tests.html#module-prisoner.workflow.tests.PolicyProcessorTests">prisoner.workflow.tests.PolicyProcessorTests module</a></li>
<li class="toctree-l2"><a class="reference internal" href="prisoner.workflow.tests.html#module-prisoner.workflow.tests.SocialObjectGatewayTests">prisoner.workflow.tests.SocialObjectGatewayTests module</a></li>
<li class="toctree-l2"><a class="reference internal" href="prisoner.workflow.tests.html#module-prisoner.workflow.tests">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-prisoner.workflow.Exceptions">
<span id="prisoner-workflow-exceptions-module"></span><h2>prisoner.workflow.Exceptions module<a class="headerlink" href="#module-prisoner.workflow.Exceptions" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="prisoner.workflow.Exceptions.DisallowedByPrivacyPolicyError">
<em class="property">exception </em><code class="descclassname">prisoner.workflow.Exceptions.</code><code class="descname">DisallowedByPrivacyPolicyError</code><span class="sig-paren">(</span><em>error</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.Exceptions.DisallowedByPrivacyPolicyError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Raised if a method attempts to perform an action not allowed by the
current privacy policy.</p>
</dd></dl>

<dl class="exception">
<dt id="prisoner.workflow.Exceptions.IncorrectSecretError">
<em class="property">exception </em><code class="descclassname">prisoner.workflow.Exceptions.</code><code class="descname">IncorrectSecretError</code><a class="headerlink" href="#prisoner.workflow.Exceptions.IncorrectSecretError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Raised if the secret is not correct for this experiment</p>
</dd></dl>

<dl class="exception">
<dt id="prisoner.workflow.Exceptions.InvalidPolicyProvidedError">
<em class="property">exception </em><code class="descclassname">prisoner.workflow.Exceptions.</code><code class="descname">InvalidPolicyProvidedError</code><span class="sig-paren">(</span><em>error</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.Exceptions.InvalidPolicyProvidedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="prisoner.workflow.Exceptions.NoPrivacyPolicyProvidedError">
<em class="property">exception </em><code class="descclassname">prisoner.workflow.Exceptions.</code><code class="descname">NoPrivacyPolicyProvidedError</code><a class="headerlink" href="#prisoner.workflow.Exceptions.NoPrivacyPolicyProvidedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Raised if a privacy policy is required before the operation can be
completed. See the SocialObjectGateway or ExperimentBuilder to provide a privacy
policy.</p>
<p>A Privacy policy is required to read or write data to/from service
gateways.</p>
</dd></dl>

<dl class="exception">
<dt id="prisoner.workflow.Exceptions.OperationNotImplementedError">
<em class="property">exception </em><code class="descclassname">prisoner.workflow.Exceptions.</code><code class="descname">OperationNotImplementedError</code><span class="sig-paren">(</span><em>operation</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.Exceptions.OperationNotImplementedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Raised if a service gateway does not implement a request operation
(GET, POST, PUT etc.)</p>
</dd></dl>

<dl class="exception">
<dt id="prisoner.workflow.Exceptions.RuntimePrivacyPolicyParserError">
<em class="property">exception </em><code class="descclassname">prisoner.workflow.Exceptions.</code><code class="descname">RuntimePrivacyPolicyParserError</code><span class="sig-paren">(</span><em>error</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.Exceptions.RuntimePrivacyPolicyParserError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Raised if a privacy policy which passed schema validation fails
complex validation - eg. an invalid object reference is provided, or logical
criteria is incorrectly expressed</p>
</dd></dl>

<dl class="exception">
<dt id="prisoner.workflow.Exceptions.ServiceGatewayNotFoundError">
<em class="property">exception </em><code class="descclassname">prisoner.workflow.Exceptions.</code><code class="descname">ServiceGatewayNotFoundError</code><span class="sig-paren">(</span><em>gateway</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.Exceptions.ServiceGatewayNotFoundError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Raised if a participation client attempts to connect to a service
without a corresponding ServiceGateway class in the gateway module.</p>
</dd></dl>

<dl class="exception">
<dt id="prisoner.workflow.Exceptions.SocialObjectNotSupportedError">
<em class="property">exception </em><code class="descclassname">prisoner.workflow.Exceptions.</code><code class="descname">SocialObjectNotSupportedError</code><span class="sig-paren">(</span><em>gateway</em>, <em>object</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.Exceptions.SocialObjectNotSupportedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Raised if a service gateway doesn&#8217;t know how to handle the given
social object.</p>
</dd></dl>

</div>
<div class="section" id="module-prisoner.workflow.ExperimentBuilder">
<span id="prisoner-workflow-experimentbuilder-module"></span><h2>prisoner.workflow.ExperimentBuilder module<a class="headerlink" href="#module-prisoner.workflow.ExperimentBuilder" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="prisoner.workflow.ExperimentBuilder.CallbackHandler">
<em class="property">class </em><code class="descclassname">prisoner.workflow.ExperimentBuilder.</code><code class="descname">CallbackHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.CallbackHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">tornado.web.RequestHandler</span></code></p>
<p>Takes a parameter (callback), and calls the unescaped version of
that URL (useful for baking nested params in a callback URL)</p>
<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.CallbackHandler.get">
<code class="descname">get</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.CallbackHandler.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="prisoner.workflow.ExperimentBuilder.CompleteConsentHandler">
<em class="property">class </em><code class="descclassname">prisoner.workflow.ExperimentBuilder.</code><code class="descname">CompleteConsentHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.CompleteConsentHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">tornado.web.RequestHandler</span></code></p>
<p>Called when the user has authenticated themselves with the last
provider necessary. This completes the authentication flow and allows the
experimental application to begin.</p>
<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.CompleteConsentHandler.get">
<code class="descname">get</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.CompleteConsentHandler.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="prisoner.workflow.ExperimentBuilder.ConsentFlowHandler">
<em class="property">class </em><code class="descclassname">prisoner.workflow.ExperimentBuilder.</code><code class="descname">ConsentFlowHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ConsentFlowHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">tornado.web.RequestHandler</span></code></p>
<p>This renders the human-readable representation of the privacy
policy and ensures the participant understands the data requirements of the
experimental application before providing consent.</p>
<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.ConsentFlowHandler.get">
<code class="descname">get</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ConsentFlowHandler.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="prisoner.workflow.ExperimentBuilder.ExperimentBuilder">
<em class="property">class </em><code class="descclassname">prisoner.workflow.ExperimentBuilder.</code><code class="descname">ExperimentBuilder</code><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ExperimentBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>The ExperimentBuilder is the interface for bootstrapping an
experiment with PRISONER. After instantiating an ExperimentBuilder,
complete the following steps:</p>
<ul class="simple">
<li>call provide_privacy_policy() with the path to your privacy policy XML
file</li>
<li>call provide_experimental_design() with the path to your experimental
design XML file</li>
<li>call authenticate_participant() with the id of the participant in this
session</li>
<li>call authenticate_providers() with a list of services which the
participant must authenticate with to participate</li>
<li>call build() to generate a pre-experiment flow, which allows
participants to review a human-readable version of your privacy 
policy, and to authenticate themselves with providers as needed.</li>
</ul>
<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.ExperimentBuilder.authenticate_participant">
<code class="descname">authenticate_participant</code><span class="sig-paren">(</span><em>schema</em>, <em>participant_id</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ExperimentBuilder.authenticate_participant" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide the ID of the participant in this experiment. This
participant must exist in the participant table for this
experiment.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>participant_id</strong> (<em>int</em>) &#8211; ID of participant</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.ExperimentBuilder.authenticate_providers">
<code class="descname">authenticate_providers</code><span class="sig-paren">(</span><em>providers</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ExperimentBuilder.authenticate_providers" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a list of provider names this participant needs to
be authenticated with to participate (eg. if they are only using
a subset of providers all participants will be using, only include that subset
in this list). When the experiment is built, each gateway will inject its own
authentication logic.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>providers</strong> (<em>list[str]</em>) &#8211; List of providers to authenticate with</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.ExperimentBuilder.build">
<code class="descname">build</code><span class="sig-paren">(</span><em>callback_url</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ExperimentBuilder.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Using the information provided by the participation client,
instigate the experiment consent process. This does the
following:</p>
<ul class="simple">
<li>parse the experimental design and privacy policy and generate
a human-readable document, relevant to the participant, which
also lists which providers the participant will be asked to authenticate with</li>
<li>creates a temporary web server - the participation client must
access the returned URL using the cookie provided when the
ExperimentBuilder was instantiated</li>
<li>when the user consents to the policies, each service gateway
for which authentication is needed provides a URL to
authenticate with which the participant is asked to visit in</li>
</ul>
<p>turn (decorated by additional context from PRISONER for participants&#8217;
confidence). Note, this URL must contain the entire
authentication flow, so you may need to host this yourself, particularly if this
involves two (or more) factor authentication as users are bounced between URLs
(many authentication flows expect a URL callback). This flow
must return a token to persist alongside the Participant.</p>
<p>: param callback: A callable to be invoked only when consent is
confirmed - ie. the entrypoint for the participation client
:type callback: callable
: returns: URL participant must visit to begin consent flow</p>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.ExperimentBuilder.build_schema">
<code class="descname">build_schema</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ExperimentBuilder.build_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs the database schema (destroying whatever data
might already exist). This places the database in a state in which participants
may be registered, and experiments run, but does not return usable interfaces to
the rest of the workflow (such as the SocialObjectGateway)</p>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.ExperimentBuilder.consent_confirmed">
<code class="descname">consent_confirmed</code><span class="sig-paren">(</span><em>cookie</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ExperimentBuilder.consent_confirmed" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when user with given cookie accepts consent. If
cookie is valid, continue the authentication flow for that participant.</p>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.ExperimentBuilder.get_props">
<code class="descname">get_props</code><span class="sig-paren">(</span><em>who_for=None</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ExperimentBuilder.get_props" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.ExperimentBuilder.provide_contact">
<code class="descname">provide_contact</code><span class="sig-paren">(</span><em>contact</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ExperimentBuilder.provide_contact" title="Permalink to this definition">¶</a></dt>
<dd><p>How to contact someone in connection with this experiment,
eg. an email address. This should be provided in a form that fits the following
sentence construction:</p>
<blockquote>
<div>&#8220;Contact the researcher at &lt;contact&gt;.&#8221;</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>contact</strong> (<em>str</em>) &#8211; Contact information</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.ExperimentBuilder.provide_db_string">
<code class="descname">provide_db_string</code><span class="sig-paren">(</span><em>db_string</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ExperimentBuilder.provide_db_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.ExperimentBuilder.provide_experimental_design">
<code class="descname">provide_experimental_design</code><span class="sig-paren">(</span><em>exp_design</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ExperimentBuilder.provide_experimental_design" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide the experimental design for this experiment.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>exp_design</strong> (<em>str</em>) &#8211; Path to experimental design file</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.ExperimentBuilder.provide_privacy_policy">
<code class="descname">provide_privacy_policy</code><span class="sig-paren">(</span><em>policy</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ExperimentBuilder.provide_privacy_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide the privacy policy for this experiment.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>policy</strong> (<em>str</em>) &#8211; Path to privacy policy file</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.ExperimentBuilder.provide_title">
<code class="descname">provide_title</code><span class="sig-paren">(</span><em>title</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ExperimentBuilder.provide_title" title="Permalink to this definition">¶</a></dt>
<dd><p>The title of the experiment as presented to your
participants.
:param title: Friendly experiment title
:type title: str</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="prisoner.workflow.ExperimentBuilder.ProviderAuthentHandler">
<em class="property">class </em><code class="descclassname">prisoner.workflow.ExperimentBuilder.</code><code class="descname">ProviderAuthentHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ProviderAuthentHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">tornado.web.RequestHandler</span></code></p>
<p>Called during the authentication flow for each provider. Informs the
participant about the service they are about to authenticate themselves with,
then redirects to the appropriate URL for that service.</p>
<dl class="method">
<dt id="prisoner.workflow.ExperimentBuilder.ProviderAuthentHandler.get">
<code class="descname">get</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.ExperimentBuilder.ProviderAuthentHandler.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="prisoner-workflow-policydocumentgenerator-module">
<h2>prisoner.workflow.PolicyDocumentGenerator module<a class="headerlink" href="#prisoner-workflow-policydocumentgenerator-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-prisoner.workflow.PolicyProcessor">
<span id="prisoner-workflow-policyprocessor-module"></span><h2>prisoner.workflow.PolicyProcessor module<a class="headerlink" href="#module-prisoner.workflow.PolicyProcessor" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="prisoner.workflow.PolicyProcessor.PolicyProcessor">
<em class="property">class </em><code class="descclassname">prisoner.workflow.PolicyProcessor.</code><code class="descname">PolicyProcessor</code><span class="sig-paren">(</span><em>policy=None</em>, <em>sog=None</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.PolicyProcessor.PolicyProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>The Policy Processor is responsible for validating and sanitising all
requests to retrieve and publish Social Objects.</p>
<p>It requires a well-formed privacy policy XML file to be supplied. If
this is missing or invalid, all requests will fail.</p>
<p>The PolicyProcessor is an internal object. Service gateways and
participation clients do not need to directly interact with it.
See the SocialObjectGateway for a friendly interface to these innards.</p>
<p>PolicyProcessor needs an instance of SocialObjectGateway so it can
evaluate the current session scope of service gateways.</p>
<dl class="attribute">
<dt id="prisoner.workflow.PolicyProcessor.PolicyProcessor.privacy_policy">
<code class="descname">privacy_policy</code><a class="headerlink" href="#prisoner.workflow.PolicyProcessor.PolicyProcessor.privacy_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the privacy policy bound to this PolicyProcessor.</p>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.PolicyProcessor.PolicyProcessor.validate_policy">
<code class="descname">validate_policy</code><span class="sig-paren">(</span><em>policy</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.PolicyProcessor.PolicyProcessor.validate_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates a privacy policy against the XML Schema.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>policy</strong> (<em>str.</em>) &#8211; Path to privacy policy XML file.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">ElementTree &#8211; policy object</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">IOError</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-prisoner.workflow.SocialObjectGateway">
<span id="prisoner-workflow-socialobjectgateway-module"></span><h2>prisoner.workflow.SocialObjectGateway module<a class="headerlink" href="#module-prisoner.workflow.SocialObjectGateway" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="prisoner.workflow.SocialObjectGateway.InvalidPrivacyPolicy">
<em class="property">exception </em><code class="descclassname">prisoner.workflow.SocialObjectGateway.</code><code class="descname">InvalidPrivacyPolicy</code><span class="sig-paren">(</span><em>error</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.InvalidPrivacyPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="prisoner.workflow.SocialObjectGateway.ServiceGatewayNotFound">
<em class="property">exception </em><code class="descclassname">prisoner.workflow.SocialObjectGateway.</code><code class="descname">ServiceGatewayNotFound</code><span class="sig-paren">(</span><em>gateway</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.ServiceGatewayNotFound" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
</dd></dl>

<dl class="class">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway">
<em class="property">class </em><code class="descclassname">prisoner.workflow.SocialObjectGateway.</code><code class="descname">SocialObjectsGateway</code><span class="sig-paren">(</span><em>server_url=None</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>This is a friendlier interface to PRISONER&#8217;s internals,
which participation clients should access.
This coordinates access to other service gateways, and the management of experimental responses.</p>
<p>A single instance of this object should be maintained throughout the lifecycle of an experimental application.</p>
<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.GetObject">
<code class="descname">GetObject</code><span class="sig-paren">(</span><em>provider</em>, <em>object_type</em>, <em>payload</em>, <em>allow_many=False</em>, <em>criteria=None</em>, <em>extra_args=None</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.GetObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface for retrieving an object from a service gateway.
Requests are verified against the privacy policy, and returned objects are sanitised as appropriate.
The payload and filter arguments are semantically distinct. See
the documentation for each argument to understand how to use them.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>provider</strong> (<em>str</em>) &#8211; name of provider to get object from</li>
<li><strong>object_type</strong> (<em>str</em>) &#8211; name of object to get</li>
<li><strong>payload</strong> (<em>object</em>) &#8211; This must contain a SocialObject or dictionary of
arguments necessary for the ServiceGateway to make a meaningful request. For
example, it may be a user ID to retrieve their photos, however it should not
contain criteria for filtering the objects returned
(see criteria).
The expected payload depends on the ServiceGateway and
the objects you are requesting. See the documentation for each object exposed by
the ServiceGateway to see the payload it requests.</li>
<li><strong>criteria</strong> &#8211; Optional criteria for filtering the objects returned by the
ServiceGateway. This expression is run on all objects returned by
gateway, and only where it evaluates as True is the
object returned. Uses syntax similar to lambda expressions, without prefix. x is used
to refer to each instance of an object.
eg. &#8216;&#8220;party&#8221; in x.tags&#8217;</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">SocialObject &#8211; sanitised for consumption by participation client</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.GetObjectJSON">
<code class="descname">GetObjectJSON</code><span class="sig-paren">(</span><em>provider</em>, <em>object_type</em>, <em>payload</em>, <em>criteria</em>, <em>extra_args=None</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.GetObjectJSON" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface for retrieving objects from a service gateway, for
consumption by web services.</p>
<p>This differs from GetObject in some fundamental ways. GetObject
is more pythonic - you request objects by supplying relevant SocialObjects, and
you get SocialObject instances in return. This method however, receives
plain-text responses, and returns
JSON objects. Whereas GetObject expects a
semantically-appropriate SocialObject as the payload (eg. supply an instance of Person to
receive objects of a given type owned by that Person), this method expects a
payload expressed as a query string, using the namespaced syntax found in the
privacy policy spec. For example, a payload of &#8220;session:Lastfm.id&#8221; will
be evaluated as &#8220;get objects authored by the user ID in the Last.fm session.
&#8220;literal:lukeweb&#8221;, similarly, returns objects owned by that literal user.
JSON objects are returned, with the same fields as the Pythonic counterparts. A
key difference is that the returned object has an additional attribute injected
- prisoner_id. This is a unique identifier for the returned object <a href="#id1"><span class="problematic" id="id2">*</span></a>that is</p>
<blockquote>
<div>valid for the duration of this session*. Rather than passing around full</div></blockquote>
<p>instances of objects, subsequent queries, or publication of experimental
responses, need only refer to this ID to ensure PRISONER is able to relate your
requests back to the full representation of the data. Note that subsequent
attempts to retrieve the cached object are subject to the privacy policy
sanitisation process of the <em>original</em> request.</p>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.PostObject">
<code class="descname">PostObject</code><span class="sig-paren">(</span><em>provider</em>, <em>object_type</em>, <em>payload</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.PostObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Request to write a Social Object to a given provider.
Requests are verified against the privacy policy, and outgoing objects are sanitised as necessary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>provider</strong> (<em>str</em>) &#8211; Provider name</li>
<li><strong>object_type</strong> (<em>str</em>) &#8211; Type of object to write</li>
<li><strong>payload</strong> (<em>Social Object</em>) &#8211; Object to post to provider</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.PostObjectJSON">
<code class="descname">PostObjectJSON</code><span class="sig-paren">(</span><em>provider</em>, <em>object_type</em>, <em>payload</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.PostObjectJSON" title="Permalink to this definition">¶</a></dt>
<dd><p>Used by web services interface for pushing objects to a service gateway.</p>
<p>Expects a payload as a JSON dictionary, where the keys are the appropriate fields of &lt;object_type&gt;
This method converts the dictionary to a native object and pushes it through the PRISONER pipe for sanitisation and publication</p>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.cache_object">
<code class="descname">cache_object</code><span class="sig-paren">(</span><em>object_to_cache</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.cache_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a unique identifier for this object, caches it,
and returns the identifier.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>object_to_cache</strong> (<a class="reference internal" href="prisoner.html#prisoner.SocialObjects.SocialObject" title="prisoner.SocialObjects.SocialObject"><em>SocialObject</em></a>) &#8211; SocialObject to cache</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">str &#8211; object&#8217;s identifier</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.complete_authentication">
<code class="descname">complete_authentication</code><span class="sig-paren">(</span><em>provider</em>, <em>request=None</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.complete_authentication" title="Permalink to this definition">¶</a></dt>
<dd><p>Completes the second stage of authentication with a provider.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>provider</strong> (<em>str.</em>) &#8211; Name of provider to authenticate with.</li>
<li><strong>request</strong> &#8211; The request received from the provider when it</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>called the PRISONER callback. This should contain any parameters needed to
complete authentication
:type request: werkzeug Request</p>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.get_participant">
<code class="descname">get_participant</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.get_participant" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.get_service_gateway">
<code class="descname">get_service_gateway</code><span class="sig-paren">(</span><em>provider</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.get_service_gateway" title="Permalink to this definition">¶</a></dt>
<dd><p>External wrapper to internal function</p>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.post_response">
<code class="descname">post_response</code><span class="sig-paren">(</span><em>schema</em>, <em>response</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.post_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Passes the response to the PersistenceManager to write to the
internal database. There must be an experimental design bound first.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>schema</strong> (<em>str.</em>) &#8211; Name of the response table to write to</li>
<li><strong>response</strong> (<em>dict</em>) &#8211; The response dictionary to write to the specified schema</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.provide_experimental_design">
<code class="descname">provide_experimental_design</code><span class="sig-paren">(</span><em>experimental_design</em>, <em>connection_string</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.provide_experimental_design" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide the experimental design for this experiment.
Used to instantiate a PersistenceManager.
Can only be done once per instance of SocialObjectGateway.
This must be called before attemtping to persist any response data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>experimental_design</strong> (<em>str</em>) &#8211; path to an experimental design XML file</li>
<li><strong>connection_string</strong> (<em>str</em>) &#8211; database connection string for persisting data</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.provide_privacy_policy">
<code class="descname">provide_privacy_policy</code><span class="sig-paren">(</span><em>privacy_policy</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.provide_privacy_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide the privacy policy for this experiment. Used to instantiate an instance
of PolicyProcessor. This can only be done once for an instance of SocialObjectGateway.
This must be called before attempting to read or write Social Objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>privacy_policy</strong> (<em>str</em>) &#8211; path to a privacy policy XML file</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.register_participant">
<code class="descname">register_participant</code><span class="sig-paren">(</span><em>schema</em>, <em>participant</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.register_participant" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.request_authentication">
<code class="descname">request_authentication</code><span class="sig-paren">(</span><em>provider</em>, <em>callback</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.request_authentication" title="Permalink to this definition">¶</a></dt>
<dd><p>Call this if it is necessary to perform authenticated API
calls with a service gateway (usually required to write data as a person or to
read sensitive data).</p>
<p>Each service gateway has its own res
mechanism. Calling this will return a token needed to proceed with
authentication. Authentication is completed by presenting a relevant interface
to users, then calling complete_authentication() with its token.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>provider</strong> (<em>str.</em>) &#8211; Name of provider to authenticate with.</li>
<li><strong>callback</strong> &#8211; URL to let PRISONER authentication server know</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>user has provided authentication
:type callback: str.
:returns: URL required to complete authentication</p>
</dd></dl>

<dl class="method">
<dt id="prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.restore_authentication">
<code class="descname">restore_authentication</code><span class="sig-paren">(</span><em>provider</em>, <em>access_token</em><span class="sig-paren">)</span><a class="headerlink" href="#prisoner.workflow.SocialObjectGateway.SocialObjectsGateway.restore_authentication" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to provide a service gateway with an existing access
token (eg. stored in DB) to authenticate without going through clientside flow.
Returns boolean value to indicate success. If False, a call
should be made to requst_authentication() to begin clientside flow.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>provider</strong> (<em>str</em>) &#8211; Name of provider to authenticate with</li>
<li><strong>access_token</strong> (<em>object</em>) &#8211; Object used to authenticate with this provider</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>:returns boolean - was authentication attempt successful?</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-prisoner.workflow">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-prisoner.workflow" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="prisoner.workflow.tests.html" class="btn btn-neutral float-right" title="prisoner.workflow.tests package" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="prisoner.tests.html" class="btn btn-neutral" title="prisoner.tests package" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Luke Hutton.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.2.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>